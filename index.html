<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>VelocityType - Speed Test</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }
        .typing-text {
            font-family: 'Courier New', monospace;
            line-height: 1.8;
            font-size: 1.25rem;
        }
        .correct {
            background-color: #d1fae5;
            color: #065f46;
            border-radius: 2px;
            padding: 1px 2px;
        }
        .incorrect {
            background-color: #fee2e2;
            color: #991b1b;
            border-radius: 2px;
            padding: 1px 2px;
            text-decoration: underline wavy red;
        }
        .current {
            background: linear-gradient(135deg, #3b82f6, #1d4ed8);
            color: white;
            border-radius: 2px;
            padding: 1px 2px;
            animation: pulse 1s infinite;
        }
        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.7; }
        }
        .result-card {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            transition: transform 0.3s ease;
        }
        .result-card:hover {
            transform: translateY(-5px);
        }
        .progress-ring {
            transform: rotate(-90deg);
        }
        .progress-ring-circle {
            transition: stroke-dashoffset 0.35s;
        }
        .floating-particles {
            position: absolute;
            width: 100%;
            height: 100%;
            overflow: hidden;
            z-index: -1;
        }
        .particle {
            position: absolute;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 50%;
            animation: float 6s ease-in-out infinite;
        }
        @keyframes float {
            0%, 100% { transform: translateY(0px) rotate(0deg); }
            50% { transform: translateY(-20px) rotate(180deg); }
        }
    </style>
</head>
<body class="min-h-screen flex items-center justify-center p-4">
    <div class="floating-particles" id="particles"></div>
    
    <div class="w-full max-w-6xl mx-auto">
        <div class="text-center mb-8">
            <h1 class="text-5xl font-bold text-white mb-2">
                <i class="fas fa-bolt mr-3"></i>VelocityType
            </h1>
            <p class="text-white/80 text-lg">Test your typing speed and accuracy</p>
        </div>

        <div class="bg-white/10 backdrop-blur-lg rounded-3xl p-8 shadow-2xl">
            <!-- Stats Bar -->
            <div class="grid grid-cols-2 md:grid-cols-4 gap-6 mb-8">
                <div class="text-center">
                    <div class="text-3xl font-bold text-white" id="wpm">0</div>
                    <div class="text-white/70 text-sm">WPM</div>
                </div>
                <div class="text-center">
                    <div class="text-3xl font-bold text-white" id="accuracy">100</div>
                    <div class="text-white/70 text-sm">Accuracy %</div>
                </div>
                <div class="text-center">
                    <div class="text-3xl font-bold text-white" id="errors">0</div>
                    <div class="text-white/70 text-sm">Errors</div>
                </div>
                <div class="text-center">
                    <div class="text-3xl font-bold text-white" id="time">60</div>
                    <div class="text-white/70 text-sm">Seconds</div>
                </div>
            </div>

            <!-- Progress Ring -->
            <div class="flex justify-center mb-8">
                <svg class="w-32 h-32">
                    <circle class="progress-ring-circle" stroke="white" stroke-width="4" stroke-linecap="round" fill="transparent" r="50" cx="64" cy="64"/>
                </svg>
            </div>

            <!-- Typing Area -->
            <div class="bg-white/20 rounded-2xl p-8 mb-6">
                <div id="text-display" class="typing-text text-gray-800 mb-6 leading-relaxed">
                    Loading text...
                </div>
                <textarea 
                    id="text-input" 
                    class="w-full h-32 p-4 rounded-xl bg-white/90 text-gray-800 placeholder-gray-500 focus:outline-none focus:ring-4 focus:ring-blue-400 resize-none text-lg"
                    placeholder="Click here to start typing..."
                    disabled
                ></textarea>
            </div>

            <!-- Controls -->
            <div class="flex justify-center gap-4">
                <button id="restart-btn" class="bg-blue-500 hover:bg-blue-600 text-white px-8 py-3 rounded-xl font-semibold transition-all duration-300 transform hover:scale-105">
                    <i class="fas fa-redo mr-2"></i>Restart
                </button>
                <button id="theme-btn" class="bg-purple-500 hover:bg-purple-600 text-white px-8 py-3 rounded-xl font-semibold transition-all duration-300 transform hover:scale-105">
                    <i class="fas fa-palette mr-2"></i>Theme
                </button>
            </div>
        </div>

        <!-- Results Modal -->
        <div id="results-modal" class="fixed inset-0 bg-black/50 backdrop-blur-sm hidden items-center justify-center z-50">
            <div class="bg-white rounded-3xl p-8 max-w-md w-full mx-4">
                <h2 class="text-3xl font-bold text-center mb-6 text-gray-800">Results</h2>
                <div class="space-y-4">
                    <div class="result-card rounded-xl p-4">
                        <div class="flex justify-between items-center">
                            <span class="text-gray-600">WPM</span>
                            <span class="text-2xl font-bold text-blue-600" id="final-wpm">0</span>
                        </div>
                    </div>
                    <div class="result-card rounded-xl p-4">
                        <div class="flex justify-between items-center">
                            <span class="text-gray-600">Accuracy</span>
                            <span class="text-2xl font-bold text-green-600" id="final-accuracy">0%</span>
                        </div>
                    </div>
                    <div class="result-card rounded-xl p-4">
                        <div class="flex justify-between items-center">
                            <span class="text-gray-600">Errors</span>
                            <span class="text-2xl font-bold text-red-600" id="final-errors">0</span>
                        </div>
                    </div>
                </div>
                <button id="close-modal" class="w-full mt-6 bg-blue-500 hover:bg-blue-600 text-white py-3 rounded-xl font-semibold transition-colors">
                    Try Again
                </button>
            </div>
        </div>
    </div>

    <script>
        // Sample texts for typing test
        const texts = [
            "The quick brown fox jumps over the lazy dog. This pangram contains every letter of the English alphabet at least once. It's commonly used for testing typewriters and keyboards.",
            "In the digital age, typing speed has become an essential skill. Whether you're a student, professional, or developer, fast and accurate typing can significantly boost your productivity and efficiency.",
            "Technology continues to evolve at an unprecedented pace. From artificial intelligence to quantum computing, these innovations are reshaping our world and creating new opportunities for innovation.",
            "The art of writing is not just about putting words on paper. It's about conveying emotions, sharing ideas, and connecting with readers across time and space through the power of language.",
            "Success is not final, failure is not fatal: it is the courage to continue that counts. These words remind us that persistence and determination are often more important than initial results."
        ];

        let currentText = '';
        let startTime = null;
        let timer = null;
        let timeLeft = 60;
        let isTestActive = false;
        let currentPosition = 0;
        let errors = 0;
        let currentTheme = 0;

        const themes = [
            { bg: 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)', text: 'white' },
            { bg: 'linear-gradient(135deg, #f093fb 0%, #f5576c 100%)', text: 'white' },
            { bg: 'linear-gradient(135deg, #4facfe 0%, #00f2fe 100%)', text: 'white' },
            { bg: 'linear-gradient(135deg, #43e97b 0%, #38f9d7 100%)', text: 'white' }
        ];

        const elements = {
            textDisplay: document.getElementById('text-display'),
            textInput: document.getElementById('text-input'),
            wpm: document.getElementById('wpm'),
            accuracy: document.getElementById('accuracy'),
            errors: document.getElementById('errors'),
            time: document.getElementById('time'),
            restartBtn: document.getElementById('restart-btn'),
            themeBtn: document.getElementById('theme-btn'),
            resultsModal: document.getElementById('results-modal'),
            closeModal: document.getElementById('close-modal'),
            finalWpm: document.getElementById('final-wpm'),
            finalAccuracy: document.getElementById('final-accuracy'),
            finalErrors: document.getElementById('final-errors'),
            particles: document.getElementById('particles')
        };

        function createParticles() {
            for (let i = 0; i < 20; i++) {
                const particle = document.createElement('div');
                particle.className = 'particle';
                particle.style.left = Math.random() * 100 + '%';
                particle.style.top = Math.random() * 100 + '%';
                particle.style.width = Math.random() * 10 + 5 + 'px';
                particle.style.height = particle.style.width;
                particle.style.animationDelay = Math.random() * 6 + 's';
                elements.particles.appendChild(particle);
            }
        }

        function initializeTest() {
            currentText = texts[Math.floor(Math.random() * texts.length)];
            elements.textDisplay.innerHTML = currentText.split('').map((char, index) => 
                `<span id="char-${index}">${char}</span>`
            ).join('');
            
            elements.textInput.value = '';
            elements.textInput.disabled = false;
            elements.textInput.focus();
            
            startTime = null;
            timeLeft = 60;
            currentPosition = 0;
            errors = 0;
            isTestActive = true;
            
            updateDisplay();
        }

        function updateDisplay() {
            elements.wpm.textContent = calculateWPM();
            elements.accuracy.textContent = Math.max(0, Math.round((currentText.length - errors) / currentText.length * 100));
            elements.errors.textContent = errors;
            elements.time.textContent = timeLeft;
            
            const progressCircle = document.querySelector('.progress-ring-circle');
            const radius = progressCircle.r.baseVal.value;
            const circumference = radius * 2 * Math.PI;
            progressCircle.style.strokeDasharray = `${circumference} ${circumference}`;
            const offset = circumference - (timeLeft / 60) * circumference;
            progressCircle.style.strokeDashoffset = offset;
        }

        function calculateWPM() {
            if (!startTime) return 0;
            const timeElapsed = (Date.now() - startTime) / 1000 / 60;
            const wordsTyped = currentPosition / 5;
            return Math.round(wordsTyped / timeElapsed);
        }

        function checkCharacter(inputChar, expectedChar) {
            if (inputChar === expectedChar) {
                return true;
            }
            return false;
        }

        function endTest() {
            isTestActive = false;
            clearInterval(timer);
            elements.textInput.disabled = true;
            
            elements.finalWpm.textContent = calculateWPM();
            elements.finalAccuracy.textContent = Math.max(0, Math.round((currentText.length - errors) / currentText.length * 100)) + '%';
            elements.finalErrors.textContent = errors;
            
            elements.resultsModal.classList.remove('hidden');
            elements.resultsModal.classList.add('flex');
        }

        function startTimer() {
            timer = setInterval(() => {
                timeLeft--;
                updateDisplay();
                
                if (timeLeft <= 0) {
                    endTest();
                }
            }, 1000);
        }

        function changeTheme() {
            currentTheme = (currentTheme + 1) % themes.length;
            document.body.style.background = themes[currentTheme].bg;
        }

        // Event Listeners
        elements.textInput.addEventListener('input', (e) => {
            if (!isTestActive) return;
            
            if (!startTime) {
                startTime = Date.now();
                startTimer();
            }

            const inputText = e.target.value;
            const currentChar = currentText[currentPosition];

            if (inputText.length > currentPosition) {
                // New character typed
                const typedChar = inputText[currentPosition];
                
                if (checkCharacter(typedChar, currentChar)) {
                    document.getElementById(`char-${currentPosition}`).className = 'correct';
                } else {
                    document.getElementById(`char-${currentPosition}`).className = 'incorrect';
                    errors++;
                }
                
                if (currentPosition < currentText.length - 1) {
                    document.getElementById(`char-${currentPosition + 1}`).className = 'current';
                }
                
                currentPosition++;
            } else if (inputText.length < currentPosition) {
                // Backspace pressed
                currentPosition--;
                document.getElementById(`char-${currentPosition}`).className = 'current';
                document.getElementById(`char-${currentPosition + 1}`).className = '';
            }

            updateDisplay();
        });

        elements.restartBtn.addEventListener('click', () => {
            clearInterval(timer);
            initializeTest();
        });

        elements.themeBtn.addEventListener('click', changeTheme);
        
        elements.closeModal.addEventListener('click', () => {
            elements.resultsModal.classList.add('hidden');
            elements.resultsModal.classList.remove('flex');
            initializeTest();
        });

        // Initialize
        createParticles();
        initializeTest();
    </script>
</body>
</html>
